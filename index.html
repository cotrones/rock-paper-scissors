<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Rock, Paper, Scissors!</title>
	<link rel="stylesheet" type="text/css" href="css/reset.css">
	<link href="https://fonts.googleapis.com/css?family=Rajdhani:400,700" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>

	<div class="main">

		<h1>Rock, Paper, Scissors!</h1>

		<div class="scoreRow">
			<div class="scoreCol">
				<h2 class="scoreHead">You</h2>
				<div class="score">
					<span id="userScore">0</span>
				</div>
			</div>
			<div class="scoreCol">
				<h2 class="scoreHead">Comp</h2>
				<div class="score">
					<span id="compScore">0</span>
				</div>
			</div>
		</div>

		<div class="detailRow">
			<span id="detail">Select rock, paper or scissors.</span>
			<div id="reset">
				<span>Play Again!</span>
			</div>
		</div>

		<div class="choiceRow">
			<div class="choice" id="rock"><img src="img/rock.png" class="responsive"></div>
			<div class="choice" id="paper"><img src="img/paper.png" class="responsive"></div>
			<div class="choice" id="scissors"><img src="img/scissors.png" class="responsive"></div>
		</div>
		
	</div>


	<script type="text/javascript">
		
		const choices = ["rock", "paper", "scissors"];
		let userScore = 0;
		let compScore = 0;

		let compPlay = function() {
			let result = choices[Math.floor(Math.random() * choices.length)];
			return result;
		}

		let playRound = function(userSelection, compSelection) {
			console.log("You: " + userSelection);
			console.log("CPU: " + compSelection);

			if (userSelection === compSelection) {
				return "It's a tie, select again!";
			} else if (userSelection == 'rock') {
				if (compSelection == 'scissors') {
					userScore++;
					return "You Win! Rock beats scissors.";
				} else {
					compScore++;
					return "You Lose! Paper beats rock.";
				}
			} else if (userSelection == 'paper') {
				if (compSelection == 'rock') {
					userScore++;
					return "You Win! Paper beats rock";
				} else {
					compScore++;
					return "You Lose! Scissors beat paper.";
				}
			} else {
				if (compSelection == "paper") {
					userScore++;
					return "You Win! Scissors beat paper.";
				} else {
					compScore++;
					return "You Lose! Rock beats scissors.";
				}
			}
		}

		let game = function(userChoice) {
			console.log("You: " + userScore);
			console.log("CPU: " + compScore);
			if (userScore == 5) {
				document.querySelector('#reset').style.display = "block";
			} else if (compScore == 5) {
				document.querySelector('#reset').style.display = "block";
			} else {
				let player = userChoice;
				let comp = compPlay();
				playRound(player, comp);
			}
		}

		rock.addEventListener("click", function() {
			game('rock');
		});
		
		paper.addEventListener("click", function() {
			game('paper');
		});
		
		scissors.addEventListener("click", function() {
			game('scissors');
		});

		reset.addEventListener("click", function () {
			userScore = 0;
			compScore = 0;
			document.querySelector('#reset').style.display = "none";
		});

	</script>

</body>
</html>